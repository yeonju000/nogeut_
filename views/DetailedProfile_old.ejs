<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="/css/header.css" type="text/css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="start-date" content="2024-05-10">
  <title>노긋노긋</title>
  <script defer src="https://use.fontawesome.com/releases/v5.15.3/js/all.js"
    integrity="sha384-haqrlim99xjfMxRP6EWtafs0sB1WKcMdynwZleuUSwJR0mDeRYbhtY+KPMr+JL6f"
    crossorigin="anonymous"></script>
  <script>
    //자기 소개와 주의 사항에서 엔터 키를 <br> 태그로 대체하여 줄 바꿈을 유지
    const selfIntroTextarea = document.querySelector('textarea[name="selfIntro"]');
    const cautionTextarea = document.querySelector('textarea[name="caution"]');

    selfIntroTextarea.value = selfIntroTextarea.value.replace(/\n/g, '<br>');
    cautionTextarea.value = cautionTextarea.value.replace(/\n/g, '<br>');
  </script>
</head>

<body style="background-color: #E1EFD7;">
  <header class="header__container">
    <!-- Site H1 / display: none -->
    <h1 class="main-title">노긋 노긋</h1>
    <div class="header__block">
      <% if (typeof user !== 'undefined' && user) { %>
        <h6 style="font-size: small; padding: 0; margin-top: 0; margin-bottom: 0; margin-right: 20px;">반갑습니다, <%= user.name %>님!</h6>
        <a href="/Detail"> 마이페이지 </a>
        <a href="/logout"> 로그아웃 </a>
      <% } else { %>
        <a href="/login"> 로그인 </a>
      <% } %>
    </div>

    <div class="header_nav-main-block">
      <!-- 네비게이션에 해당하는 부분 -->
      <nav class="header__nav-block">
        <ul class="nav__list" role="navigation">

          <li class="nav__list-item">
            <a href="/main" aria-label="노긋노긋 홈페이지">
              <img src="/images/logo.png" width=50px alt="로고">
            </a>
          </li>
          <li class="nav__list-item">
            <a href="#"> 매칭하기 </a>
          </li>
          <li class="nav__list-item">
            <a href="#"> 보고서작성 </a>
          </li>
          <li class="nav__list-item">
            <a href="#"> 후기작성 </a>
          </li>
          <li class="nav__list-item">
            <a href="#"> 보고서확인 </a>
          </li>
        </ul>
      </nav>
    </div>
  </header>
  <div style="width: 710px; margin: auto;">
    <h2>프로필</h2>
    <div style="width: 700px; background-color: white; margin: auto; padding: 50px;">
      <img src="data:image/jpeg;base64,<%= encodedImageBase64String %>"
        style="width: 200px; height: 200px; border-radius: 50%; object-fit: cover;">
      <table>
        <tr>
          <td style="width: 70px;">
            <h4>이름</h6>
          </td>
          <td>
            <%= senior.seniorName %>
          </td>
        </tr>
        <tr>
          <td>
            <h4>나이</h6>
          </td>
          <td>
            <%= age %>세
          </td>
        </tr>
        <tr>
          <td>
            <h4>성별</h6>
          </td>
          <td>
            <%= senior.gender %>
          </td>
        </tr>
        <tr>
          <td>
            <h4>지역</h6>
          </td>
          <td>
            <%= senior.sido %>
              <%= senior.gu %>
          </td>
        </tr>
        <tr>
          <td>
            <h4>매칭횟수</h6>
          </td>
          <td>
            <%= senior.matchingCount %>
          </td>
        </tr>
      </table>
      <hr>
      <h4>희망 분야</h4>
      <div style="width: 100%; height: 60px;">
        <% for (let i=0; i < interests.length; i++) { %>
          <div
            style="margin-bottom: 10px; margin-right: 15px ; width: 70px; height: 30px; border-radius: 15px; background-color: #E1EFD7; text-align : center; float: left;">
            <%= interests[i].interestField %>
          </div>
          <% } %>
      </div>
      <br>
      <h4 style="display: inline;">희망 금액</h4>
      <h6 style="display: inline;"> 1시간 기준</h6><br><br>
      <div
        style="width: 70px; height: 30px; border-radius: 15px; background-color: #E1EFD7; display: flex; justify-content: center; align-items: center;">
        <%= senior.desiredAmount %>
      </div>
      <br>
      <h4>가능 시간</h4>
      <div
        style="width: 70px; height: 30px; border-radius: 15px; background-color: #E1EFD7; display: flex; justify-content: center; align-items: center;">
        <%= senior.availableTime %>
      </div>
      <br>
      <hr>
      <h4>자기소개</h4>
      <div class="self-intro" style="background-color: #F8F8F8; border-radius: 20px; padding: 10px;">
        <%- senior.introduce %>
      </div>
      <h4>주의사항</h4>
      <div class="caution" style="background-color: #F8F8F8; border-radius: 20px; padding: 10px;">
        <%- senior.precautions %>
      </div>
      <br>
      <hr>
      <h4>후기</h4>
      <div style="overflow-y: scroll; background-color: #F8F8F8; border-radius: 20px; padding: 15px; height: 300px;">
        <% for (let i=0; i < review.length; i++) { %>
          <div style="background-color: #E1EFD7; border-radius: 20px; padding: 15px; margin-bottom: 10px;">
            <%= review[i].reviewContent %>
          </div>
          <% } %>
      </div>
      <br>
      <input type="button" value="약속잡기"
        style="font-size: 15px; color: white; border: 0; border-radius: 15px; background-color:#2D6210; padding: 10px; display: inline-block;" onclick="redirectTORequest()">
      </div>
  </div>
  <script>
    function redirectTORequest() {
      window.location.href = 'promise/<%=senior.seniorNum %>'; 
    }
  </script>
</body>

</html>